4. DISEÃ‘O DEL MÃ“DULO DE COTIZACIONES

  BasÃ¡ndome en el anÃ¡lisis, este es el diseÃ±o propuesto:

  A. TABLAS DE BASE DE DATOS

  quotes (cotizaciones)
  - id
  - quote_number (generado: QT-00000001)
  - customer_id (nullable)
  - branch_id
  - user_id (vendedor)
  - quote_date
  - expiration_date (validez de la cotizaciÃ³n)
  - status (pendiente, aprobada, rechazada, convertida, vencida)
  - subtotal
  - tax (IGV)
  - discount
  - total
  - notes
  - converted_to_sale_id (nullable - si se convirtiÃ³ a venta)
  - converted_at (nullable)
  - timestamps
  - soft_deletes

  quote_details
  - id
  - quote_id
  - product_id
  - quantity
  - unit_price
  - subtotal
  - discount
  - timestamps

  B. FUNCIONALIDADES PRINCIPALES

  1. Crear CotizaciÃ³n
    - Interfaz similar a Sales/Create.tsx
    - Seleccionar cliente (opcional)
    - Agregar productos con precios editables
    - Fecha de expiraciÃ³n configurable
    - Descuentos por producto y general
    - Generar PDF para enviar al cliente
  2. Listar Cotizaciones
    - Tabla responsive como Sales/Index.tsx
    - Filtros: estado, sucursal, cliente, rango de fechas
    - BÃºsqueda en tiempo real
    - Estados con badges de colores
    - BotÃ³n para convertir a venta
  3. Ver CotizaciÃ³n
    - Detalles completos
    - Productos cotizados
    - Botones de acciÃ³n:
        - Editar (si estÃ¡ pendiente)
      - Convertir a Venta
      - Duplicar
      - Enviar por email
      - Descargar PDF
      - Anular
  4. Convertir a Venta
    - Copiar todos los datos de la cotizaciÃ³n
    - Redireccionar a Sales/Create con datos pre-llenados
    - Marcar cotizaciÃ³n como "convertida"
    - Vincular venta con cotizaciÃ³n
  5. PDF de CotizaciÃ³n
    - Similar a sale-a4.blade.php
    - Marca de agua "COTIZACIÃ“N"
    - Mostrar validez/expiraciÃ³n
    - 4 formatos (A4, A5, 80mm, 50mm)

  C. ESTADOS DE COTIZACIÃ“N

  - pendiente - Creada, esperando respuesta del cliente
  - aprobada - Cliente aprobÃ³ pero aÃºn no se convirtiÃ³ a venta
  - rechazada - Cliente rechazÃ³ la cotizaciÃ³n
  - convertida - Se convirtiÃ³ en venta
  - vencida - PasÃ³ la fecha de expiraciÃ³n

  D. PERMISOS REQUERIDOS

  'quote-list'
  'quote-create'
  'quote-edit'
  'quote-delete'
  'quote-convert' // Convertir a venta

  E. RUTAS

  // web.php
  Route::resource('quotes', QuoteController::class);
  Route::post('quotes/{quote}/convert', [QuoteController::class, 'convertToSale'])->name('quotes.convert');
  Route::post('quotes/{quote}/duplicate', [QuoteController::class, 'duplicate'])->name('quotes.duplicate');
  Route::get('quotes/{quote}/pdf', [QuoteController::class, 'pdf'])->name('quotes.pdf');
  Route::post('quotes/{quote}/send-email', [QuoteController::class, 'sendEmail'])->name('quotes.send-email');

  F. NAVEGACIÃ“N

  Ya estÃ¡ en el sidebar (lÃ­neas 113-116 de app-sidebar.tsx):
  {
      title: 'Cotizaciones',
      href: '/quotes',
      icon: Calculator,
  }

  ---
  5. PLAN DE IMPLEMENTACIÃ“N

  El plan estÃ¡ en el todo list, listos para implementar:

  âœ… AnÃ¡lisis completoğŸ“‹ Siguiente: Implementar migraciÃ³n y modeloğŸ“‹ Crear controladorğŸ“‹ Implementar vistas React

  ---
  Â¿Quieres que proceda con la implementaciÃ³n del mÃ³dulo de cotizaciones siguiendo este diseÃ±o?